

To run this you'll need:

redis-server

Some python dependencies:
- flask
- ...

Create needed folders:
- mkdir upload tmp

To run:
- python worker.py
- python server.py

Pending:
- create another user to run the worker.py
- restrict permissions in folders

Create another user to handle the submissions:
- create user: sudo adduser judge
- set its group to the same as the server
$ sudo groupadd codingchallenges
$ sudo usermod -a -G codingchallenges server
$ sudo usermod -a -G codingchallenges judge
- set server files permission as: chmod -R 700 *
- set server files permission as: chmod -R 700 .*
- set permissions in the server folder: chmod -R 750 *
- set permissions in the tmp folder: chmod 770 tmp

Set firewall rules:
iptables --append OUTPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
 
# create a new chain
iptables --new-chain chk_apache_user
 
# use new chain to process packets generated by apache
iptables -A OUTPUT -m owner --uid-owner judge -j chk_apache_user
 
# Allow 143 (IMAP) and 25 so that webmail works :)
# iptables -A chk_apache_user -p tcp --syn -d 127.0.0.1 --dport 143 -j RETURN
# iptables -A chk_apache_user -p tcp --syn -d 127.0.0.1 --dport 25  -j RETURN
 
# reject everything else and stop hackers downloading code into our server
iptables -A chk_apache_user -j REJECT
